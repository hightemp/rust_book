# –†–∞–±–æ—Ç–∞ —Å –≤–µ–±-API –≤ Rust

–í–µ–±-API (Application Programming Interface) - —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. –í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–µ–±-API –≤ Rust, –≤–∫–ª—é—á–∞—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å REST API, GraphQL, –∞ —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö API.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å –≤–µ–±-API](#–æ—Å–Ω–æ–≤—ã-—Ä–∞–±–æ—Ç—ã-—Å-–≤–µ–±-api)
- [REST API](#rest-api)
  - [–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å REST API](#–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ-—Å-rest-api)
  - [–û–±—Ä–∞–±–æ—Ç–∫–∞ JSON-–¥–∞–Ω–Ω—ã—Ö](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-json-–¥–∞–Ω–Ω—ã—Ö)
  - [–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è-–∏-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
- [GraphQL](#graphql)
  - [–ö–ª–∏–µ–Ω—Ç—ã GraphQL](#–∫–ª–∏–µ–Ω—Ç—ã-graphql)
  - [–°–µ—Ä–≤–µ—Ä—ã GraphQL](#—Å–µ—Ä–≤–µ—Ä—ã-graphql)
- [–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ API](#—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ-api)
  - [–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API](#–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-api)
  - [–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API](#–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-api)
  - [–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API](#–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-api)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ API](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫-–≤-api)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-api)
- [–ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](#–ø—Ä–∏–º–µ—Ä—ã-—Ä–µ–∞–ª—å–Ω—ã—Ö-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)

## –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å –≤–µ–±-API

–í–µ–±-API –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç HTTP –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —á–∞—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –∏–ª–∏ XML. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å –≤–µ–±-API –≤–∫–ª—é—á–∞—é—Ç:

1. **–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTP-–º–µ—Ç–æ–¥–æ–≤ (GET, POST, PUT, DELETE) –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤** - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –æ—Ç API
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
4. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ API

## REST API

REST (Representational State Transfer) - —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤. REST API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP-–º–µ—Ç–æ–¥—ã –∏ URL –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º.

### –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å REST API

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å REST API –≤ Rust —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `reqwest`:

```rust
use reqwest::Error;
use serde::{Deserialize, Serialize};

#[derive(Debug, Deserialize)]
struct Post {
    id: u32,
    title: String,
    body: String,
    userId: u32,
}

#[tokio::main]
async fn main() -> Result<(), Error> {
    // –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç
    let client = reqwest::Client::new();
    
    // –í—ã–ø–æ–ª–Ω—è–µ–º GET-–∑–∞–ø—Ä–æ—Å
    let response = client.get("https://jsonplaceholder.typicode.com/posts/1")
        .send()
        .await?;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
    if response.status().is_success() {
        // –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º JSON-–æ—Ç–≤–µ—Ç
        let post: Post = response.json().await?;
        println!("–ü–æ–ª—É—á–µ–Ω –ø–æ—Å—Ç: {:?}", post);
    } else {
        println!("–û—à–∏–±–∫–∞: {}", response.status());
    }
    
    Ok(())
}
### –û–±—Ä–∞–±–æ—Ç–∫–∞ JSON-–¥–∞–Ω–Ω—ã—Ö

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON –≤ Rust –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `serde_json` –∏ `serde`:

```rust
use reqwest::Error;
use serde::{Deserialize, Serialize};
use serde_json::Value;

#[derive(Debug, Serialize, Deserialize)]
struct User {
    id: Option<u32>,
    name: String,
    email: String,
}

#[tokio::main]
async fn main() -> Result<(), Error> {
    let client = reqwest::Client::new();
    
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    let new_user = User {
        id: None,
        name: String::from("John Doe"),
        email: String::from("john@example.com"),
    };
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST-–∑–∞–ø—Ä–æ—Å —Å JSON-–¥–∞–Ω–Ω—ã–º–∏
    let response = client.post("https://jsonplaceholder.typicode.com/users")
        .json(&new_user)
        .send()
        .await?;
    
    // –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –∫–∞–∫ JSON
    let created_user: User = response.json().await?;
    println!("–°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {:?}", created_user);
    
    // –†–∞–±–æ—Ç–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º JSON
    let response = client.get("https://jsonplaceholder.typicode.com/users/1")
        .send()
        .await?;
    
    let json: Value = response.json().await?;
    println!("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {}", json["name"]);
    println!("Email: {}", json["email"]);
    println!("–ì–æ—Ä–æ–¥: {}", json["address"]["city"]);
    
    Ok(())
}
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ API:

#### –ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```rust
use reqwest::Error;

#[tokio::main]
async fn main() -> Result<(), Error> {
    let client = reqwest::Client::new();
    
    let response = client.get("https://api.example.com/protected")
        .basic_auth("username", Some("password"))
        .send()
        .await?;
    
    println!("–°—Ç–∞—Ç—É—Å: {}", response.status());
    println!("–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: {}", response.text().await?);
    
    Ok(())
}
```

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ç–æ–∫–µ–Ω–æ–º

```rust
use reqwest::Error;
use reqwest::header::{HeaderMap, HeaderValue, AUTHORIZATION};

#[tokio::main]
async fn main() -> Result<(), Error> {
    let client = reqwest::Client::new();
    
    // Bearer-—Ç–æ–∫–µ–Ω
    let token = "your_access_token";
    
    let response = client.get("https://api.example.com/protected")
        .header(AUTHORIZATION, format!("Bearer {}", token))
        .send()
        .await?;
    
    println!("–°—Ç–∞—Ç—É—Å: {}", response.status());
    println!("–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: {}", response.text().await?);
    
    Ok(())
}
```

#### OAuth 2.0

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å OAuth 2.0 –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `oauth2`:

```rust
use oauth2::{
    AuthUrl, AuthorizationCode, ClientId, ClientSecret, CsrfToken, RedirectUrl,
    Scope, TokenResponse, TokenUrl,
};
use oauth2::basic::BasicClient;
use oauth2::reqwest::async_http_client;
use url::Url;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    // –°–æ–∑–¥–∞–µ–º OAuth-–∫–ª–∏–µ–Ω—Ç
    let client = BasicClient::new(
        ClientId::new("client_id".to_string()),
        Some(ClientSecret::new("client_secret".to_string())),
        AuthUrl::new("https://provider.com/oauth/authorize".to_string())?,
        Some(TokenUrl::new("https://provider.com/oauth/token".to_string())?),
    )
    .set_redirect_uri(RedirectUrl::new("http://localhost:8080/callback".to_string())?);
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    let (auth_url, csrf_token) = client
        .authorize_url(CsrfToken::new_random)
## GraphQL

GraphQL - —ç—Ç–æ —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è API –∏ —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç REST, GraphQL –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º —Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–º –Ω—É–∂–Ω—ã.

### –ö–ª–∏–µ–Ω—Ç—ã GraphQL

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å GraphQL –≤ Rust –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `graphql_client`:

```rust
use graphql_client::{GraphQLQuery, Response};
use reqwest::Error;

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–∞
#[derive(GraphQLQuery)]
#[graphql(
    schema_path = "schema.graphql",
    query_path = "query.graphql",
    response_derives = "Debug"
)]
struct FilmQuery {
    film_id: String,
}

#[tokio::main]
async fn main() -> Result<(), Error> {
    // –°–æ–∑–¥–∞–µ–º –∑–∞–ø—Ä–æ—Å
    let variables = film_query::Variables {
        film_id: "ZmlsbXM6MQ==".to_string(), // ID —Ñ–∏–ª—å–º–∞ –≤ base64
    };
    
    let request_body = FilmQuery::build_query(variables);
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
    let client = reqwest::Client::new();
    let response = client.post("https://swapi-graphql.netlify.app/.netlify/functions/index")
        .json(&request_body)
        .send()
        .await?;
    
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç
    let response_body: Response<film_query::ResponseData> = response.json().await?;
    
    if let Some(data) = response_body.data {
        if let Some(film) = data.film {
            println!("–ù–∞–∑–≤–∞–Ω–∏–µ: {}", film.title);
            println!("–†–µ–∂–∏—Å—Å–µ—Ä: {}", film.director);
            println!("–î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞: {}", film.release_date);
        }
    } else if let Some(errors) = response_body.errors {
        println!("–û—à–∏–±–∫–∏: {:?}", errors);
    }
    
    Ok(())
}
```

### –°–µ—Ä–≤–µ—Ä—ã GraphQL

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è GraphQL-—Å–µ—Ä–≤–µ—Ä–∞ –≤ Rust –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `async-graphql`:

```rust
use async_graphql::{Context, EmptyMutation, EmptySubscription, Object, Schema, SimpleObject};
use async_graphql_actix_web::{GraphQLRequest, GraphQLResponse};
use actix_web::{web, App, HttpServer, Result};

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
#[derive(SimpleObject)]
struct User {
    id: i32,
    name: String,
    email: String,
}

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–∞–ø—Ä–æ—Å—ã (Query)
struct QueryRoot;

#[Object]
impl QueryRoot {
    async fn user(&self, ctx: &Context<'_>, id: i32) -> Option<User> {
        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        if id == 1 {
            Some(User {
                id: 1,
                name: "John Doe".to_string(),
                email: "john@example.com".to_string(),
            })
        } else {
            None
        }
    }
    
    async fn users(&self, ctx: &Context<'_>) -> Vec<User> {
        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        vec![
            User {
                id: 1,
                name: "John Doe".to_string(),
                email: "john@example.com".to_string(),
            },
            User {
                id: 2,
                name: "Jane Smith".to_string(),
                email: "jane@example.com".to_string(),
            },
        ]
    }
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ GraphQL-–∑–∞–ø—Ä–æ—Å–æ–≤
async fn graphql_handler(
    schema: web::Data<Schema<QueryRoot, EmptyMutation, EmptySubscription>>,
    req: GraphQLRequest,
) -> GraphQLResponse {
    schema.execute(req.into_inner()).await.into()
}

#[actix_web::main]
async fn main() -> std::io::Result<()> {
    // –°–æ–∑–¥–∞–µ–º —Å—Ö–µ–º—É
    let schema = Schema::build(QueryRoot, EmptyMutation, EmptySubscription).finish();
### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–î–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenAPI (Swagger):

```rust
use actix_web::{web, App, HttpServer, Responder};
use paperclip::actix::{
    api_v2_operation,
    web::{Json, Path},
    Apiv2Schema, OpenApiExt,
};
use serde::{Deserialize, Serialize};

#[derive(Serialize, Deserialize, Apiv2Schema)]
struct User {
    id: Option<u32>,
    name: String,
    email: String,
}

#[api_v2_operation]
async fn get_users() -> impl Responder {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    Json(vec![
        User {
            id: Some(1),
            name: "John Doe".to_string(),
            email: "john@example.com".to_string(),
        },
        User {
            id: Some(2),
            name: "Jane Smith".to_string(),
            email: "jane@example.com".to_string(),
        },
    ])
}

#[api_v2_operation]
async fn get_user(path: Path<u32>) -> impl Responder {
    let user_id = path.into_inner();
    
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    Json(User {
        id: Some(user_id),
        name: "John Doe".to_string(),
        email: "john@example.com".to_string(),
    })
}

#[api_v2_operation]
async fn create_user(user: Json<User>) -> impl Responder {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    let mut new_user = user.into_inner();
    new_user.id = Some(3); // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º ID
    
    Json(new_user)
}

#[actix_web::main]
async fn main() -> std::io::Result<()> {
    HttpServer::new(|| {
        App::new()
            .wrap_api()
            .service(
                web::scope("/api")
                    .route("/users", web::get().to(get_users))
                    .route("/users/{id}", web::get().to(get_user))
                    .route("/users", web::post().to(create_user))
            )
            .with_swagger(web::resource("/swagger").route(web::get().to(|| async {
                actix_web::HttpResponse::Ok().body("Swagger UI")
            })))
            .build()
    })
    .bind("127.0.0.1:8080")?
    .run()
    .await
}
```

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏:

```rust
use actix_web::{web, App, HttpServer, Responder};

async fn hello_v1() -> impl Responder {
    "Hello from API v1"
}

async fn hello_v2() -> impl Responder {
    "Hello from API v2"
}

#[actix_web::main]
async fn main() -> std::io::Result<()> {
    HttpServer::new(|| {
        App::new()
            .service(
                web::scope("/api/v1")
                    .route("/hello", web::get().to(hello_v1))
            )
            .service(
                web::scope("/api/v2")
                    .route("/hello", web::get().to(hello_v2))
            )
    })
    .bind("127.0.0.1:8080")?
    .run()
    .await
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ API

–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - –≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å –ª—é–±–æ–≥–æ API:

```rust
use actix_web::{error, web, App, HttpResponse, HttpServer, Responder, Result};
use serde::{Deserialize, Serialize};
use thiserror::Error;

#[derive(Error, Debug)]
enum ApiError {
    #[error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å ID {0} –Ω–µ –Ω–∞–π–¥–µ–Ω")]
    UserNotFound(u32),
    
    #[error("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤")]
    Unauthorized,
    
    #[error("–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞")]
    InternalError(#[from] anyhow::Error),
}

impl error::ResponseError for ApiError {
    fn error_response(&self) -> HttpResponse {
        match self {
            ApiError::UserNotFound(_) => {
                HttpResponse::NotFound().json(ErrorResponse {
                    code: 404,
                    message: self.to_string(),
                })
            }
            ApiError::Unauthorized => {
                HttpResponse::Unauthorized().json(ErrorResponse {
                    code: 401,
                    message: self.to_string(),
                })
            }
## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API - –≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```rust
use actix_web::{web, App, HttpResponse, test};
use serde::{Deserialize, Serialize};

#[derive(Serialize, Deserialize, PartialEq, Debug)]
struct User {
    id: u32,
    name: String,
}

async fn get_user(path: web::Path<u32>) -> HttpResponse {
    let user_id = path.into_inner();
    
    if user_id == 1 {
        HttpResponse::Ok().json(User {
            id: 1,
            name: "John Doe".to_string(),
        })
    } else {
        HttpResponse::NotFound().finish()
    }
}

#[actix_rt::test]
async fn test_get_user_ok() {
    let app = test::init_service(
        App::new().route("/users/{id}", web::get().to(get_user))
    ).await;
    
    let req = test::TestRequest::get().uri("/users/1").to_request();
    let resp = test::call_service(&app, req).await;
    
    assert!(resp.status().is_success());
    
    let user: User = test::read_body_json(resp).await;
    assert_eq!(user, User {
        id: 1,
        name: "John Doe".to_string(),
    });
}

#[actix_rt::test]
async fn test_get_user_not_found() {
    let app = test::init_service(
        App::new().route("/users/{id}", web::get().to(get_user))
    ).await;
    
    let req = test::TestRequest::get().uri("/users/999").to_request();
    let resp = test::call_service(&app, req).await;
    
    assert_eq!(resp.status(), 404);
}
```

## –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### –ö–ª–∏–µ–Ω—Ç –¥–ª—è GitHub API

```rust
use reqwest::Error;
use serde::{Deserialize, Serialize};

#[derive(Debug, Deserialize)]
struct Repository {
    id: u64,
    name: String,
    full_name: String,
    description: Option<String>,
    html_url: String,
    stargazers_count: u32,
    forks_count: u32,
}

#[derive(Debug, Deserialize)]
struct User {
    login: String,
    id: u64,
    avatar_url: String,
    html_url: String,
    name: Option<String>,
    company: Option<String>,
    blog: Option<String>,
    location: Option<String>,
    email: Option<String>,
    bio: Option<String>,
    public_repos: u32,
    followers: u32,
    following: u32,
}

#[tokio::main]
async fn main() -> Result<(), Error> {
    let client = reqwest::Client::builder()
        .user_agent("rust-github-api-client")
        .build()?;
    
    // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
    let user: User = client.get("https://api.github.com/users/rust-lang")
        .send()
        .await?
        .json()
        .await?;
    
    println!("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {}", user.login);
    println!("–ò–º—è: {}", user.name.unwrap_or_default());
    println!("–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: {}", user.public_repos);
    println!("–ü–æ–¥–ø–∏—Å—á–∏–∫–∏: {}", user.followers);
    
    // –ü–æ–ª—É—á–∞–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    let repos: Vec<Repository> = client.get("https://api.github.com/users/rust-lang/repos")
        .send()
        .await?
        .json()
        .await?;
    
    println!("\n–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:");
    for repo in repos.iter().take(5) {
        println!("- {} (‚≠ê {}, üç¥ {})", repo.name, repo.stargazers_count, repo.forks_count);
    }
    
    Ok(())
}
```

### –ü—Ä–æ—Å—Ç–æ–π REST API —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```rust
use actix_web::{web, App, HttpResponse, HttpServer, Responder};
use serde::{Deserialize, Serialize};
use sqlx::{postgres::PgPoolOptions, Pool, Postgres};

#[derive(Serialize, Deserialize)]
struct Task {
    id: Option<i32>,
    title: String,
    completed: bool,
}

struct AppState {
    db: Pool<Postgres>,
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞—á
async fn get_tasks(data: web::Data<AppState>) -> impl Responder {
    match sqlx::query_as!(Task, "SELECT id, title, completed FROM tasks")
        .fetch_all(&data.db)
        .await
    {
        Ok(tasks) => HttpResponse::Ok().json(tasks),
        Err(e) => {
            eprintln!("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {}", e);
            HttpResponse::InternalServerError().body("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
        }
    }
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ ID
async fn get_task(path: web::Path<i32>, data: web::Data<AppState>) -> impl Responder {
    let task_id = path.into_inner();
    
    match sqlx::query_as!(Task, "SELECT id, title, completed FROM tasks WHERE id = $1", task_id)
        .fetch_optional(&data.db)
        .await
    {
        Ok(Some(task)) => HttpResponse::Ok().json(task),
        Ok(None) => HttpResponse::NotFound().body(format!("–ó–∞–¥–∞—á–∞ —Å ID {} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞", task_id)),
        Err(e) => {
            eprintln!("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {}", e);
            HttpResponse::InternalServerError().body("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
        }
    }
}

// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
async fn create_task(task: web::Json<Task>, data: web::Data<AppState>) -> impl Responder {
    match sqlx::query_as!(
        Task,
        "INSERT INTO tasks (title, completed) VALUES ($1, $2) RETURNING id, title, completed",
        task.title,
        task.completed
    )
    .fetch_one(&data.db)
    .await
    {
        Ok(new_task) => HttpResponse::Created().json(new_task),
        Err(e) => {
            eprintln!("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {}", e);
            HttpResponse::InternalServerError().body("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
        }
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
async fn update_task(path: web::Path<i32>, task: web::Json<Task>, data: web::Data<AppState>) -> impl Responder {
    let task_id = path.into_inner();
    
    match sqlx::query_as!(
        Task,
        "UPDATE tasks SET title = $1, completed = $2 WHERE id = $3 RETURNING id, title, completed",
        task.title,
        task.completed,
        task_id
    )
    .fetch_optional(&data.db)
    .await
    {
        Ok(Some(updated_task)) => HttpResponse::Ok().json(updated_task),
        Ok(None) => HttpResponse::NotFound().body(format!("–ó–∞–¥–∞—á–∞ —Å ID {} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞", task_id)),
        Err(e) => {
            eprintln!("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {}", e);
            HttpResponse::InternalServerError().body("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
        }
    }
}

// –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
async fn delete_task(path: web::Path<i32>, data: web::Data<AppState>) -> impl Responder {
    let task_id = path.into_inner();
    
    match sqlx::query!("DELETE FROM tasks WHERE id = $1 RETURNING id", task_id)
        .fetch_optional(&data.db)
        .await
    {
        Ok(Some(_)) => HttpResponse::NoContent().finish(),
        Ok(None) => HttpResponse::NotFound().body(format!("–ó–∞–¥–∞—á–∞ —Å ID {} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞", task_id)),
        Err(e) => {
            eprintln!("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {}", e);
            HttpResponse::InternalServerError().body("–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
        }
    }
}

#[actix_web::main]
async fn main() -> std::io::Result<()> {
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    let pool = PgPoolOptions::new()
        .max_connections(5)
        .connect("postgres://postgres:password@localhost/tasks_db")
        .await
        .expect("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö");
    
    // –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    sqlx::query(
        "CREATE TABLE IF NOT EXISTS tasks (
            id SERIAL PRIMARY KEY,
            title TEXT NOT NULL,
            completed BOOLEAN NOT NULL DEFAULT FALSE
        )"
    )
    .execute(&pool)
    .await
    .expect("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã");
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
    HttpServer::new(move || {
        App::new()
            .app_data(web::Data::new(AppState { db: pool.clone() }))
            .route("/tasks", web::get().to(get_tasks))
            .route("/tasks/{id}", web::get().to(get_task))
            .route("/tasks", web::post().to(create_task))
            .route("/tasks/{id}", web::put().to(update_task))
            .route("/tasks/{id}", web::delete().to(delete_task))
    })
    .bind("127.0.0.1:8080")?
    .run()
    .await
}
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–∞–±–æ—Ç–∞ —Å –≤–µ–±-API –≤ Rust –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ç–µ–≤—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏. –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ Rust –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å REST API, GraphQL –∏ –¥—Ä—É–≥–∏–º–∏ —Ç–∏–ø–∞–º–∏ API.

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ API –≤–∞–∂–Ω–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º: –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ API.

–í —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–∏—Ö –∑–Ω–∞–Ω–∏–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞.
            ApiError::InternalError(_) => {
                HttpResponse::InternalServerError().json(ErrorResponse {
                    code: 500,
                    message: self.to_string(),
                })
            }
        }
    }
}

#[derive(Serialize)]
struct ErrorResponse {
    code: u16,
    message: String,
}

#[derive(Serialize, Deserialize)]
struct User {
    id: u32,
    name: String,
}

async fn get_user(path: web::Path<u32>) -> Result<impl Responder, ApiError> {
    let user_id = path.into_inner();
    
    // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if user_id == 1 {
        Ok(web::Json(User {
            id: 1,
            name: "John Doe".to_string(),
        }))
    } else {
        Err(ApiError::UserNotFound(user_id))
    }
}

#[actix_web::main]
async fn main() -> std::io::Result<()> {
    HttpServer::new(|| {
        App::new()
            .route("/users/{id}", web::get().to(get_user))
    })
    .bind("127.0.0.1:8080")?
    .run()
    .await
}
```
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
    HttpServer::new(move || {
        App::new()
            .app_data(web::Data::new(schema.clone()))
            .route("/graphql", web::post().to(graphql_handler))
    })
    .bind("127.0.0.1:8080")?
    .run()
    .await
}
```

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ API

### –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–ü—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ API –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

1. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∞—Ö
2. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –¥–µ–ª–∞–π—Ç–µ API –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º
3. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏, –∫–æ–≥–¥–∞ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∑–∞—â–∏—â–∞–π—Ç–µ API –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:

```
GET /users - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET /users/{id} - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
POST /users - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
PUT /users/{id} - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
DELETE /users/{id} - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
        .add_scope(Scope::new("read".to_string()))
        .add_scope(Scope::new("write".to_string()))
        .url();
    
    println!("–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: {}", auth_url);
    
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    // –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    
    // –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    let code = AuthorizationCode::new("authorization_code".to_string());
    
    // –û–±–º–µ–Ω–∏–≤–∞–µ–º –∫–æ–¥ –Ω–∞ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞
    let token_result = client
        .exchange_code(code)
        .request_async(async_http_client)
        .await?;
    
    println!("–¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞: {}", token_result.access_token().secret());
    
    if let Some(refresh_token) = token_result.refresh_token() {
        println!("–¢–æ–∫–µ–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: {}", refresh_token.secret());
    }
    
    Ok(())
}
```