# Основы HTTP-протокола

HTTP (HyperText Transfer Protocol) - это протокол прикладного уровня, который лежит в основе современного веба. Он определяет, как клиенты (например, веб-браузеры) взаимодействуют с серверами для обмена данными.

## Основные концепции HTTP

### Клиент-серверная архитектура

HTTP основан на модели клиент-сервер:
- **Клиент** (обычно веб-браузер) инициирует запросы к серверу
- **Сервер** обрабатывает запросы и отправляет ответы

### Без сохранения состояния (Stateless)

HTTP по своей природе не сохраняет состояние между запросами. Каждый запрос от клиента к серверу содержит всю необходимую информацию для его обработки, независимо от предыдущих запросов. Для сохранения состояния между запросами используются такие механизмы, как cookies, сессии и токены.

### Методы HTTP

HTTP определяет несколько методов, которые указывают на действие, которое должно быть выполнено с ресурсом:

| Метод | Описание |
|-------|----------|
| GET | Запрашивает представление ресурса. Запросы с этим методом должны только получать данные. |
| POST | Отправляет данные на сервер для создания нового ресурса. |
| PUT | Заменяет все текущие представления ресурса данными запроса. |
| DELETE | Удаляет указанный ресурс. |
| PATCH | Частично изменяет ресурс. |
| HEAD | Запрашивает заголовки, которые были бы возвращены, если бы был отправлен GET-запрос. |
| OPTIONS | Описывает варианты соединения с ресурсом или сервером в целом. |

### Коды состояния HTTP

Коды состояния HTTP указывают, был ли запрос успешно выполнен или нет:

| Диапазон | Категория | Примеры |
|----------|-----------|---------|
| 1xx | Информационные | 100 Continue, 101 Switching Protocols |
| 2xx | Успешные | 200 OK, 201 Created, 204 No Content |
| 3xx | Перенаправления | 301 Moved Permanently, 302 Found, 304 Not Modified |
| 4xx | Ошибки клиента | 400 Bad Request, 401 Unauthorized, 404 Not Found |
| 5xx | Ошибки сервера | 500 Internal Server Error, 502 Bad Gateway, 503 Service Unavailable |

### Заголовки HTTP

Заголовки HTTP предоставляют дополнительную информацию о запросе или ответе:

#### Общие заголовки
- `Date`: Дата и время отправки сообщения
- `Connection`: Управление соединением (например, `keep-alive` или `close`)
- `Cache-Control`: Директивы для механизмов кэширования

#### Заголовки запроса
- `Host`: Доменное имя и порт сервера
- `User-Agent`: Информация о клиенте
- `Accept`: Типы содержимого, которые клиент может обработать
- `Authorization`: Учетные данные для аутентификации
- `Cookie`: Данные, ранее отправленные сервером с помощью Set-Cookie

#### Заголовки ответа
- `Server`: Информация о сервере
- `Content-Type`: Тип содержимого в теле ответа
- `Content-Length`: Размер тела ответа в байтах
- `Set-Cookie`: Отправляет cookie с сервера на клиент
- `Location`: URL для перенаправления

### Тело запроса/ответа

Тело запроса или ответа содержит данные, которые передаются между клиентом и сервером. Формат данных определяется заголовком `Content-Type`. Наиболее распространенные форматы:

- `application/json`: Данные в формате JSON
- `application/x-www-form-urlencoded`: Данные формы
- `multipart/form-data`: Данные формы с файлами
- `text/html`: HTML-документ
- `text/plain`: Простой текст

## HTTP/1.1 vs HTTP/2 vs HTTP/3

### HTTP/1.1
- Текстовый протокол
- Последовательная обработка запросов
- Проблема "head-of-line blocking"
- Избыточность заголовков

### HTTP/2
- Бинарный протокол
- Мультиплексирование запросов
- Сжатие заголовков
- Server push
- Приоритизация потоков

### HTTP/3
- Основан на протоколе QUIC вместо TCP
- Улучшенная производительность при потере пакетов
- Быстрое установление соединения
- Улучшенная безопасность

## HTTPS

HTTPS (HTTP Secure) - это расширение протокола HTTP, которое обеспечивает шифрование данных с помощью TLS/SSL. HTTPS обеспечивает:

- **Конфиденциальность**: Данные шифруются и не могут быть прочитаны третьими лицами
- **Целостность**: Данные не могут быть изменены во время передачи
- **Аутентификация**: Подтверждение подлинности сервера

## RESTful API

REST (Representational State Transfer) - это архитектурный стиль для создания веб-сервисов. RESTful API использует HTTP-методы для выполнения операций CRUD (Create, Read, Update, Delete):

- `GET` для чтения (Read)
- `POST` для создания (Create)
- `PUT` или `PATCH` для обновления (Update)
- `DELETE` для удаления (Delete)

## Работа с HTTP в Rust

Rust предоставляет несколько библиотек для работы с HTTP:

- **Стандартная библиотека**: Не содержит специальных средств для HTTP
- **reqwest**: Популярная библиотека для HTTP-клиентов
- **hyper**: Низкоуровневая HTTP-библиотека
- **actix-web**, **rocket**, **warp**: Фреймворки для создания HTTP-серверов

В следующих разделах мы рассмотрим эти библиотеки более подробно.

## Заключение

Понимание основ HTTP-протокола является фундаментальным для разработки веб-приложений и API. Rust предоставляет мощные инструменты для работы с HTTP, которые мы будем изучать в следующих разделах.